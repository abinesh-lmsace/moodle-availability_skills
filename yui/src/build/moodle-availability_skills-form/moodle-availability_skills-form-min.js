YUI.add("moodle-availability_skills-form",function(u,e){M.availability_skills=M.availability_skills||{},M.availability_skills.form=u.Object(M.core_availability.plugin),M.availability_skills.form.initInner=function(e,l,i){this.skills=e,this.contextID=l,this.branch=i},M.availability_skills.form.getNode=function(i){var l,t,a,n,e,s,o;function c(e,l){return l=l||"availability_skills",M.util.get_string(e,l)}function r(l){["4","5","6"].find(function(e){return e==l})?(n.one("select[name=level]").hide(),n.one("input[name=points]").show()):(n.one("input[name=points]").hide(),n.one("select[name=level]").show())}function p(a,n,s,o){return new Promise(function(i,t){require(["core/fragment"],function(e){var l={skill:a},l=e.loadFragment("availability_skills","load_skill_levels",s,l);l.then(function(e){n.set("innerHTML",e||o),n.set("value",n.get("options").item(0).get("value")),M.core_availability.form.update(),i(!0)})["catch"](t)})})}return l=this.contextID,e=this.branch<500?"form-group":"",o=500<=this.branch?"form-select":"custom-select",t='<span class="col-form-label"> '+c("title")+'</span><span class="availability-group '+e+'"><label> <span class="accesshide">'+c("chooseskill")+'</span><select class=" '+o+'" name="skills" title="'+c("chooseskill")+'"><option value="0">'+c("choosedots","moodle")+"</option>",u.each(this.skills,function(e){t+='<option value="'+e.id+'">'+e.name+"</option>"}),t+='</select></label> <label> <span class="accesshide">'+c("choosetype")+' </span><select class="'+o+'" name="ct" title="'+c("choosetype")+'"><option value="0">'+c("notinlevel")+'</option><option value="1">'+c("exactlevel")+'</option><option value="2">'+c("selectlevelorhigher")+'</option><option value="3">'+c("selectlevelorlower")+'</option><option value="4">'+c("exactpoints")+'</option><option value="5">'+c("moreorequalpoints")+'</option><option value="6">'+c("lesspoints")+"</option></select>",a='<option value="0">'+c("choosedots","moodle")+"</option>",t=(t+='<span class="accesshide">'+c("chooselevel")+'</span><select class="'+o+'" name="level" title="'+c("chooselevel")+'">'+a+"</select></label> <br><br>")+('<span class="accesshide">'+c("points")+'</span><input name="points" type="text" class="form-control" style="width: 10em" title="'+c("points")+'" placeholder="'+c("points")+'" /></label></span>'),e=500<=this.branch?"d-flex flex-wrap align-items-center":"form-inline",n=u.Node.create('<span class=" '+e+'">'+t+"</span>"),i.skill!==undefined&&n.one("select[name=skills] > option[value="+i.skill+"]")&&n.one("select[name=skills]").set("value",""+i.skill),i.ct!==undefined&&n.one("select[name=ct]").set("value",""+i.ct),i.points!==undefined&&n.one("input[name=points]").set("value",i.points),r((o=n.one("select[name=ct]")).get("value")),o.on("change",function(e){r(e.target.get("value"))}),e=n.one("select[name=skills]"),s=n.one("select[name=level]"),p(e.get("value"),s,l,a).then(function(){var e,l;e=n,(l=i.level)!==undefined&&e.one("select[name=level]").set("value",l),M.core_availability.form.update()})["catch"](),e.on("change",function(e){p(e.target.get("value"),s,l,a)}),M.availability_skills.form.addedEvents||(M.availability_skills.form.addedEvents=!0,(o=u.one(".availability-field")).delegate("change",function(){M.core_availability.form.update()},".availability_skills select"),o.delegate("valuechange",function(){M.core_availability.form.update()},".availability_skills input[name=points]")),n},M.availability_skills.form.fillValue=function(e,l){e.skill=parseInt(l.one("select[name=skills]").get("value"),10),e.ct=parseInt(l.one("select[name=ct]").get("value"),10),e.points=parseInt(l.one("input[name=points]").get("value"),10),e.level=parseInt(l.one("select[name=level]").get("value"),10)},M.availability_skills.form.fillErrors=function(e,l){0===parseInt(l.one("select[name=skills]").get("value"),10)&&e.push("availability_skills:error_select_skill_id")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});