YUI.add("moodle-availability_skills-form",function(r,e){M.availability_skills=M.availability_skills||{},M.availability_skills.form=r.Object(M.core_availability.plugin),M.availability_skills.form.initInner=function(e,l){this.skills=e,this.contextID=l},M.availability_skills.form.getNode=function(t){var l,i,a,n,s,e;function o(e,l){return l=l||"availability_skills",M.util.get_string(e,l)}function c(l){["4","5","6"].find(function(e){return e==l})?(n.one("select[name=level]").hide(),n.one("input[name=points]").show()):(n.one("input[name=points]").hide(),n.one("select[name=level]").show())}function p(a,n,s,o){return new Promise(function(t,i){require(["core/fragment"],function(e){var l={skill:a},l=e.loadFragment("availability_skills","load_skill_levels",s,l);l.then(function(e){n.set("innerHTML",e||o),n.set("value",n.get("options").item(0).get("value")),M.core_availability.form.update(),t(!0)})["catch"](i)})})}return l=this.contextID,i='<span class="col-form-label"> '+o("title")+'</span><span class="availability-group mb-3 d-flex"><label> <span class="accesshide">'+o("chooseskill")+'</span><select class="form-select" name="skills" title="'+o("chooseskill")+'"><option value="0">'+o("choosedots","moodle")+"</option>",r.each(this.skills,function(e){i+='<option value="'+e.id+'">'+e.name+"</option>"}),i+='</select></label> <label> <span class="accesshide">'+o("choosetype")+' </span><select class="form-select" name="ct" title="'+o("choosetype")+'"><option value="0">'+o("notinlevel")+'</option><option value="1">'+o("exactlevel")+'</option><option value="2">'+o("selectlevelorhigher")+'</option><option value="3">'+o("selectlevelorlower")+'</option><option value="4">'+o("exactpoints")+'</option><option value="5">'+o("moreorequalpoints")+'</option><option value="6">'+o("lesspoints")+"</option></select>",a='<option value="0">'+o("choosedots","moodle")+"</option>",i=(i+='<span class="accesshide">'+o("chooselevel")+'</span><select class="form-select" name="level" title="'+o("chooselevel")+'">'+a+"</select></label> <br><br>")+('<span class="accesshide">'+o("points")+'</span><input name="points" type="text" class="form-control" style="width: 10em" title="'+o("points")+'" placeholder="'+o("points")+'" /></label></span>'),n=r.Node.create('<span class="d-flex flex-wrap align-items-center">'+i+"</span>"),t.skill!==undefined&&n.one("select[name=skills] > option[value="+t.skill+"]")&&n.one("select[name=skills]").set("value",""+t.skill),t.ct!==undefined&&n.one("select[name=ct]").set("value",""+t.ct),t.points!==undefined&&n.one("input[name=points]").set("value",t.points),c((e=n.one("select[name=ct]")).get("value")),e.on("change",function(e){c(e.target.get("value"))}),e=n.one("select[name=skills]"),s=n.one("select[name=level]"),p(e.get("value"),s,l,a).then(function(){var e,l;e=n,(l=t.level)!==undefined&&e.one("select[name=level]").set("value",l),M.core_availability.form.update()})["catch"](),e.on("change",function(e){p(e.target.get("value"),s,l,a)}),M.availability_skills.form.addedEvents||(M.availability_skills.form.addedEvents=!0,(e=r.one(".availability-field")).delegate("change",function(){M.core_availability.form.update()},".availability_skills select"),e.delegate("valuechange",function(){M.core_availability.form.update()},".availability_skills input[name=points]")),n},M.availability_skills.form.fillValue=function(e,l){e.skill=parseInt(l.one("select[name=skills]").get("value"),10),e.ct=parseInt(l.one("select[name=ct]").get("value"),10),e.points=parseInt(l.one("input[name=points]").get("value"),10),e.level=parseInt(l.one("select[name=level]").get("value"),10)},M.availability_skills.form.fillErrors=function(e,l){0===parseInt(l.one("select[name=skills]").get("value"),10)&&e.push("availability_skills:error_select_skill_id")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});